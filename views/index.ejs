<%- include("partials/head") %>
<%- include("partials/navbar") %>

<div class="container">
    <% if (message.success) { %>
        <div class="alert alert-success">Uudis lisatud!</div>
    <% } %>

    <% if (message.deleted) { %>
        <div class="alert alert-warning">Uudis kustutatud!</div>
    <% } %>

    <h1 class="mb-4">Uudised</h1>

    <ul class="list-group">
        <% news.forEach(n => { %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <a href="/news/<%= n.id %>"><%= n.title %></a>

                <% if (user && user.role === 'admin') { %>
                    <span>
                        <a class="btn btn-sm btn-primary me-2" href="/edit/<%= n.id %>">Muuda</a>
                        <form action="/delete/<%= n.id %>" method="post" style="display:inline;">
                            <button type="submit" class="btn btn-sm btn-danger">Kustuta</button>
                        </form>
                    </span>
                <% } %>
            </li>
        <% }) %>
    </ul>
</div>

<%- include("partials/footer") %>
